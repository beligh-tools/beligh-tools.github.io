var P={value:()=>{}};function y(){for(var t=0,n=arguments.length,e={},r;t<n;++t){if(!(r=arguments[t]+"")||r in e||/[\s.]/.test(r))throw new Error("illegal type: "+r);e[r]=[]}return new _(e)}function _(t){this._=t}function j(t,n){return t.trim().split(/^|\s+/).map(function(e){var r="",o=e.indexOf(".");if(o>=0&&(r=e.slice(o+1),e=e.slice(0,o)),e&&!n.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:r}})}_.prototype=y.prototype={constructor:_,on:function(t,n){var e=this._,r=j(t+"",e),o,i=-1,f=r.length;if(arguments.length<2){for(;++i<f;)if((o=(t=r[i]).type)&&(o=q(e[o],t.name)))return o;return}if(n!=null&&typeof n!="function")throw new Error("invalid callback: "+n);for(;++i<f;)if(o=(t=r[i]).type)e[o]=d(e[o],t.name,n);else if(n==null)for(o in e)e[o]=d(e[o],t.name,null);return this},copy:function(){var t={},n=this._;for(var e in n)t[e]=n[e].slice();return new _(t)},call:function(t,n){if((o=arguments.length-2)>0)for(var e=new Array(o),r=0,o,i;r<o;++r)e[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(i=this._[t],r=0,o=i.length;r<o;++r)i[r].value.apply(n,e)},apply:function(t,n,e){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],o=0,i=r.length;o<i;++o)r[o].value.apply(n,e)}};function q(t,n){for(var e=0,r=t.length,o;e<r;++e)if((o=t[e]).name===n)return o.value}function d(t,n,e){for(var r=0,o=t.length;r<o;++r)if(t[r].name===n){t[r]=P,t=t.slice(0,r).concat(t.slice(r+1));break}return e!=null&&t.push({name:n,value:e}),t}var N=y;var l=0,w=0,c=0,F=1e3,v,h,x=0,u=0,g=0,p=typeof performance=="object"&&performance.now?performance:Date,I=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function m(){return u||(I(H),u=p.now()+g)}function H(){u=0}function a(){this._call=this._time=this._next=null}a.prototype=O.prototype={constructor:a,restart:function(t,n,e){if(typeof t!="function")throw new TypeError("callback is not a function");e=(e==null?m():+e)+(n==null?0:+n),!this._next&&h!==this&&(h?h._next=this:v=this,h=this),this._call=t,this._time=e,k()},stop:function(){this._call&&(this._call=null,this._time=1/0,k())}};function O(t,n,e){var r=new a;return r.restart(t,n,e),r}function A(){m(),++l;for(var t=v,n;t;)(n=u-t._time)>=0&&t._call.call(void 0,n),t=t._next;--l}function E(){u=(x=p.now())+g,l=w=0;try{A()}finally{l=0,S(),u=0}}function L(){var t=p.now(),n=t-x;n>F&&(g-=n,x=t)}function S(){for(var t,n=v,e,r=1/0;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:v=e);h=t,k(r)}function k(t){if(!l){w&&(w=clearTimeout(w));var n=t-u;n>24?(t<1/0&&(w=setTimeout(E,t-p.now()-g)),c&&(c=clearInterval(c))):(c||(x=p.now(),c=setInterval(L,F)),l=1,I(E))}}function z(t,n,e){var r=new a;return n=n==null?0:+n,r.restart(o=>{r.stop(),t(o+n)},n,e),r}function B(t,n,e){var r=new a,o=n;return n==null?(r.restart(t,n,e),r):(r._restart=r.restart,r.restart=function(i,f,s){f=+f,s=s==null?m():+s,r._restart(function D(T){T+=o,r._restart(D,o+=f,s),i(T)},f,s)},r.restart(t,n,e),r)}export{N as a,m as b,O as c,z as d,B as e};
